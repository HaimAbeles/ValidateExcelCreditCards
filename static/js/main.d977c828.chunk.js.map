{"version":3,"sources":["Components/UploadUsers/UploadUsers.jsx","App.js","reportWebVitals.js","index.js"],"names":["UploadUsers","_useState","useState","_useState2","Object","slicedToArray","fileValue","setFileValue","_useState3","_useState4","data","setData","_useState5","_useState6","validIndex","setValidIndex","_useState7","_useState8","notValidIndex","setNotValidIndex","_useState9","_useState10","validAndNotClubsIndex","setValidAndNotClubsIndex","String","prototype","splice","idx","rem","str","this","slice","Math","abs","useEffect","f","reader","name","FileReader","onload","evt","bstr","target","result","wb","XLSX","read","type","wsname","SheetNames","ws","Sheets","utils","sheet_to_csv","header","csv","lines","replaceAll","split","headers","i","length","obj","currentline","j","CARD_NUM","push","convertToJson","readAsBinaryString","readFile","console","log","JSON","stringify","valid","notValid","forEach","x","test","validateCardNo","checkLuhn","no","indexOf","cardNo","s","doubleDigit","digit","react_default","a","createElement","Fragment","onChange","e","stopPropagation","preventDefault","file","files","onClick","value","className","map","App","UploadUsers_UploadUsers","reportWebVitals","onPerfEntry","Function","__webpack_require__","then","bind","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.d977c828.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport XLSX from \"xlsx\";\r\nimport './UploadUsers.css'\r\nexport default function UploadUsers() {\r\n\r\n  const [fileValue, setFileValue] = useState('');\r\n  const [data, setData] = useState();\r\n  const [validIndex, setValidIndex] = useState([]);\r\n  const [notValidIndex, setNotValidIndex] = useState([]);\r\n  const [validAndNotClubsIndex, setValidAndNotClubsIndex] = useState([]);\r\n\r\n  String.prototype.splice = function (idx, rem, str) {\r\n    return this.slice(0, idx) + str + this.slice(idx + Math.abs(rem));\r\n  };\r\n\r\n  function clearInput(e) {\r\n    e.target.value = null;\r\n  }\r\n\r\n  function filePathset(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    var file = e.target.files[0];\r\n    setFileValue(file);\r\n  }\r\n\r\n  useEffect(() => {\r\n    readFile();\r\n  }, [fileValue]);\r\n\r\n  useEffect(() => {\r\n    if (!data) return;\r\n    console.log(JSON.stringify(data));\r\n    let valid = 0, notValid = 0, validAndNotClubs = 0;\r\n    let validIndex = [], notValidIndex = [], validAndNotClubsIndex = [];\r\n    data.forEach((x, i) => {\r\n      var test = validateCardNo(x.CARD_NUM);\r\n      if (test) {\r\n        ++valid;\r\n        validIndex.push(i + 2);\r\n        test = checkLuhn(x.CARD_NUM);\r\n        if (!test)\r\n          validAndNotClubsIndex.push(i + 2)\r\n      }\r\n      else {\r\n        ++notValid;\r\n        notValidIndex.push(i + 2)\r\n      }\r\n    });\r\n    console.log('valid', valid)\r\n    console.log('notValid', notValid)\r\n    console.log('validAndNotClubs', validAndNotClubs)\r\n    console.log('validIndex', validIndex);\r\n    console.log('notValidIndex', notValidIndex);\r\n    console.log('validAndNotClubsIndex', validAndNotClubsIndex);\r\n    setValidIndex(validIndex);\r\n    setNotValidIndex(notValidIndex);\r\n    setValidAndNotClubsIndex(validAndNotClubsIndex);\r\n  }, [data]);\r\n\r\n  // var ValidateCreditCard = function (cardNo) {\r\n  //   if(cardNo === '') return false;\r\n  //   var s = 0;\r\n  //   var doubleDigit = false;\r\n  //   for (var i = cardNo.length - 1; i >= 0; i--) {\r\n  //     var digit = +cardNo[i];\r\n  //     if (doubleDigit) {\r\n  //       digit *= 2;\r\n  //       if (digit > 9)\r\n  //         digit -= 9;\r\n  //     }\r\n  //     s += digit;\r\n  //     doubleDigit = !doubleDigit;\r\n  //   }\r\n  //   return s % 10 == 0;\r\n  // }\r\n\r\n  function readFile() {\r\n    if (!fileValue) return;\r\n    var f = fileValue;\r\n    var name = f.name;\r\n    const reader = new FileReader();\r\n    reader.onload = (evt) => {\r\n      // evt = on_file_select event\r\n      /* Parse data */\r\n      const bstr = evt.target.result;\r\n      const wb = XLSX.read(bstr, { type: \"binary\" });\r\n      /* Get first worksheet */\r\n      const wsname = wb.SheetNames[0];\r\n      const ws = wb.Sheets[wsname];\r\n      /* Convert array of arrays */\r\n      const data = XLSX.utils.sheet_to_csv(ws, { header: 1 });\r\n      /* Update state */\r\n      setData(convertToJson(data)); // shows data in json format\r\n    };\r\n    reader.readAsBinaryString(f);\r\n  }\r\n\r\n  function convertToJson(csv) {\r\n    var lines = csv.replaceAll('.00', '').split(\"\\n\");\r\n\r\n    var result = [];\r\n    var headers = lines[0].split(\",\");\r\n\r\n    for (var i = 1; i < lines.length; i++) {\r\n      var obj = {};\r\n      var currentline = lines[i].split(\",\");\r\n\r\n      for (var j = 0; j < headers.length; j++) {\r\n        obj[headers[j]] = currentline[j];\r\n      }\r\n      obj.CARD_NUM = obj.CARD_NUM;\r\n      result.push(obj);\r\n    }\r\n\r\n    //return result; //JavaScript object\r\n    return result; //JSON\r\n  }\r\n\r\n  var validateCardNo = function (no) {\r\n    return (no && checkLuhn(no) &&\r\n      no.length == 16 && (no[0] == 4 || no[0] == 5 && no[1] >= 1 && no[1] <= 5 ||\r\n        (no.indexOf(\"6011\") == 0 || no.indexOf(\"65\") == 0)) ||\r\n      no.length == 15 && (no.indexOf(\"34\") == 0 || no.indexOf(\"37\") == 0) ||\r\n      no.length == 13 && no[0] == 4)\r\n  }\r\n\r\n  var checkLuhn = function (cardNo) {\r\n    var s = 0;\r\n    var doubleDigit = false;\r\n    for (var i = cardNo.length - 1; i >= 0; i--) {\r\n      var digit = +cardNo[i];\r\n      if (doubleDigit) {\r\n        digit *= 2;\r\n        if (digit > 9)\r\n          digit -= 9;\r\n      }\r\n      s += digit;\r\n      doubleDigit = !doubleDigit;\r\n    }\r\n    return s % 10 == 0;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <input type=\"file\" onChange={filePathset} onClick={clearInput} />\r\n      {validIndex.length > 0 && <div>סה\"כ אשראי תקינים: {validIndex.length}</div>}\r\n      {validIndex.length > 0 && <div>סה\"כ אשראי תקינים אבל ללא התאמה לחברת אשראי: {validAndNotClubsIndex.length}</div>}\r\n      {notValidIndex.length > 0 && <div>סה\"כ אשראי לא תקינים: {notValidIndex.length}</div>}\r\n      {\r\n        validIndex.length > 0 &&\r\n        <div className=\"conteinarResult\">\r\n          <div>מספרי שורות של אשראי תקינים</div>\r\n          {validIndex.map(x => <span>{x}, </span>)}\r\n        </div>\r\n      }\r\n      {\r\n        validIndex.length > 0 &&\r\n        <div className=\"conteinarResult\">\r\n          <div>מספרי שורות של אשראי תקינים  אבל ללא התאמה לחברת אשראי</div>\r\n          {validAndNotClubsIndex.map(x => <span>{x}, </span>)}\r\n        </div>\r\n      }\r\n      {\r\n        notValidIndex.length > 0 &&\r\n        <div className=\"conteinarResult\">\r\n          <div>מספרי שורות של אשראי לא תקינים</div>\r\n          {notValidIndex.map(x => <span>{x}, </span>)}\r\n        </div>\r\n      }\r\n    </>\r\n  )\r\n}","import './App.css';\nimport React from 'react';\nimport UploadUsers from './Components/UploadUsers/UploadUsers';\n\nfunction App() {\n  return (\n    <>\n      {\n        <div className=\"App\">\n          <UploadUsers />\n        </div>\n      }\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\nreportWebVitals();\n"],"sourceRoot":""}